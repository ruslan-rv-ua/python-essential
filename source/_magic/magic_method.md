# "Магічні" методи. Перевизначення операторів

> ***Спеціальний***, або ***магічний метод*** — це метод, який викликається неявно, часто щоб виконати операцію для певного типа. 

Наприклад, можна визначити __bool__ метод, щоб вказати чи є об'єкт True/False в булевому контексті. Таким чином дуже багато аспектів поведінки об'єктів в Python можна змінити.

Імена магічних методів починаються і закінчуються двома символами підкреслення, наприклад:

	__init__
	__getattr__
	__eq__



### Життєвий цикл об'єкта

Нам вже відомий самий базовий магічний метод, `__init__`. За його допомоги ми можемо ініціалізвати об'єкт. Однак, коли ми напишемо:

	x = SomeClass()
	
'__init__' це не саме перше, що викликається. Насправді екземпляр об'єкта створює метод `__new__`, а вже потім ініціалізатор. На іншому кінці життєвого цикла об'єкта знаходиться метод `__del__`. Давайте детальніше розглянемо ці три магічних метода.

#### `__new__(cls, [...])`

Конструктор класа. Це перший метод, який буде викликано при створенні об'єкта. Він приймає в якості параметрів клас і потім будь-які інші аргументи, які буде передано в `__init__`. `__new__` використовується дуже рідко, але деколи буває корисним, зокрема, коли клас успадковується від немутабельного (immutable) типа, такого як кортеж (tuple) чи рядок.

#### `__init__(self, [...)`

Ініціалізатор класа. Йому передається усе, з чим було викликано конструктор. Наприклад, якщо ми напишемо

	x = SomeClass(10, 'foo')

`__init__` отримає 10 і 'foo' в якості аргументів. 
`__init__` майже повсемістно використовується при визначенні класів. 
Майже завжди цей метод помилково називають конструктором.

#### `__del__(self)`

Якщо `__new__` і `__init__` — конструктори об'єкта, `__del__` — його деструктор. Він не визначає поведінку для оператора `del`, 
тому цей код не є еквівалентним `x.__del__(). 
Він визначає поведінку об'єкта у той час, коли за об'єкт береться збиральник сміття. 
Це може бути доволі зручно для об'єктів, які можуть потребувати додаткових "чисток" під час видалення, наприклад сокети чи файлові об'єкти. 
Однак пам'ятайте, що
`__del__` не може слугувати заміною для хороших програмістських практик. 
Завжди завершуйте з'єднання, якщо закінчили з нми працювати і так далі! Фактично, через відсутність гарантії виклику, `__del__` не повинен використовуватись майже ніколи. Використовуйте його з обережністю!



