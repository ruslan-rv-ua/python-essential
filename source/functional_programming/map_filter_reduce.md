# Функції map(), filter(), reduce()

Трьома класичними функціями вищого порядка, які приймають функцію і послідовність, є `map`, `filter` і `reduce`. 

### `map()`

Застосовує функцію до кожного елемента послідовності. Повертає ітератор. 

Приклад. Є символьний рядок, у якому числа розділено пробілами. 
Треба отримати список цих чисел: 

	:::python
	>>> string = '2 4 8 15 42'
	>>> numbers = map(int, string.split())
	>>> list(numbers)
	[2, 4, 8, 15, 42]
	>>>

Функції `map()` ми передали функцію `int` і список з символьних рядків, до елементів якого і було застосовано цю функцію. 

### `filter()`

Залишає лише ті елементи послідовності, для яких задана функція повертає істинне значення. 
Повертає ітератор. 

Приклад. 
"Відфільтруємо" список цілих чисел і залишимо лише ті, які більше нули:

	:::python
	>>> numbers = [3, 2, -1, 0, 15, -8, -7, 3, -3, 8]
	>>> positive_numbers = filter(lambda x: x > 0, numbers)
	>>> list(positive_numbers)
	[3, 2, 15, 3, 8]
	>>>

Фугкції `filter()` ми передали анонімну функцію і список. 

### `reduce()`

Приймає функцію від двох аргументів, послідовность і опціональне початкове значення. 
Обчислює згортання (fold) послідовності як результат послідовного застосування даної функції до поточного значення (так званому акумулятору) і наступному елементу послідовності. Міститься в модулі `functools`. 

Трохи незрозуміло? Розберемось. 

Отже функція `reduce()` приймає три параметри:

- функцію
- ітерабельний об'єкт
- акумулятор

Останній параметр необов'язковий. 
Якщо він відсутній, то в якості акумулятора береться перший елемент послідовності. 

Далі для акумулятора і для кожного наступного елемента послідовності викликається передана функція. 
Результат її дії записується в акумулятор. 
Процес повторюється поки не буде "пройдено" всю послідовність. 

Приклад. 
Є список чисел, треба отримати їх добуток. 

	:::python
	>>> from functools import reduce
	>>> numbers = [1, 2, 3, 4, 5]
	>>> product = reduce(lambda a, x: a*x, numbers)
	>>> product
	120

Функції `reduce()` ми передали анонімну функцію, яка повертає добуток двох чисел. 
Ця функція застосовується спершу до чисел 1 і 2, в результаті отримуємо 2. 
Потім до чисел 2 (попередній результат) і 3 (наступний елемент списка), вийде 6. 
Потім до чисел 6 і 4, і врешті решт до чисел 24 і 5. 

Ще один приклад. 
Є список списків чисел:

	[[1, 2, 3], [4, 5], [6, 7, 8]]
	
Треба отримати один список який міститиме усі числа: 

	[1, 2, 3, 4, 5, 6, 7, 8]
	
За допомогою `reduce()` це можна зробити просто і елегантно: 

	:::python
	>>> nums = [[1, 2, 3], [4, 5], [6, 7, 8]]
	>>> l = reduce(lambda x,y: x+y, nums)
	>>> l
	[1, 2, 3, 4, 5, 6, 7, 8]
	>>>

Ще можна замість анонімної функції використати магічний метод класа `list`:

	:::python
	>>> l = reduce(list.__add__, nums)
	>>> l
	[1, 2, 3, 4, 5, 6, 7, 8]
	>>>

























